<nb-card>
    <nb-card-header class="d-flex justify-content-between">
        <div class="d-flex">
            <h5>Visual Condition</h5>
            <nb-select placeholder="Piping Id" class="mx-5" status="primary">
                <nb-option value="option" *ngFor="let option of [1,2,3,4,5]">{{ option }}</nb-option>
            </nb-select>
        </div>
        <mat-form-field>
            <mat-label>Hit Enter To Search</mat-label>
            <input matInput 
                placeholder="Ex. Mia" #input>
        </mat-form-field>
    </nb-card-header>
    <nb-card-body class="row">

        <div class="col-3">
            <table style="width: 100%; box-shadow: none;" mat-table [dataSource]="dataSource" class="mat-elevation-z8">
                <!-- Position Column -->
                <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef [ngStyle]=" {'width' : '40px'} "> Pipe Id </th>
                    <td mat-cell *matCellDef="let element" #nameCell
                        style="cursor : pointer"
                        [ngStyle]="{'color' : selectionData == element.position ? '#0492c2' : 'black'}"
                        (mouseover)="nameCell.style.color = '#0492c2'"
                        (mouseout)="selectionData == element.position 
                        ? nameCell.style.color = '#0492c2' 
                        : nameCell.style.color = 'black'"
                        (click)="showData(element)"
                    > {{element.position}} </td>
                </ng-container>
    
                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                    (click)="selection.toggle(row)">
                </tr>
            </table>
            
            <mat-paginator 
                [length]="resultsLength" 
                [pageSize]="30" 
                aria-label="Select page of GitHub search results">
            </mat-paginator>
        </div>


        <div class="col-9">
            <nb-accordion multi>
                <nb-accordion-item expanded="true">
                <nb-accordion-item-header>General</nb-accordion-item-header>
                <nb-accordion-item-body>
                    <div class="d-flex justify-content-between">
                        <div>
                            <span>Selection Pipe : </span> <br>
                            <span>{{ selectionData }}</span>
                            <mat-form-field class="my-2">
                                <mat-label>Condition</mat-label>
                                <mat-select>
                                <mat-option [value]="item" *ngFor="let item of [1,2,3,4]">{{ item }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                
                        <div class="w-100 mx-4">
                            <label class="d-block mb-2" for="finding">Finding</label>
                            <textarea nbInput name="finding" id="finding" fullWidth rows="5"></textarea>
                        </div>
                
                        <div class="w-100">
                            <label class="d-block mb-2" for="recomendation">Recomendation</label>
                            <textarea nbInput name="recomendation" id="recomendation" fullWidth rows="5"></textarea>
                        </div>
                    </div>
                </nb-accordion-item-body>
                </nb-accordion-item>

                <nb-accordion-item expanded="true">
                    <nb-accordion-item-header>External Checklist</nb-accordion-item-header>
                    <nb-accordion-item-body >
                        <div class="row">
                            <section class="pb-5 px-4 col-6" *ngFor="let checkList of externalCheckList">
                                <div class="d-flex align-items-center justify-content-between">
                                    <label class="d-block mb-2" for="finding">{{ checkList.title }}</label>
                                    <mat-form-field>
                                        <mat-label>Condition</mat-label>
                                        <mat-select>
                                        <mat-option 
                                            [value]="item" 
                                            *ngFor="let level of [
                                                'Excellent',
                                                'Good',
                                                'Average',
                                                'Below Average',
                                                'Poor'
                                            ]"
                                            >{{ level }}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                
                                <div class="w-100">
                                    <textarea nbInput name="finding" id="finding" fullWidth rows="5"></textarea>
                                </div>
                
                                <nb-list>
                                    <nb-list-item 
                                    *ngFor="let source of checkList.source" 
                                    class="d-flex justify-content-between">
                                        <span>{{ source }}</span>
                                        <nb-checkbox 
                                        class="mx-2"
                                        (checkedChange)="toggle($event)"></nb-checkbox>
                                    </nb-list-item>
                                </nb-list>
                            </section>
                        </div>
                    </nb-accordion-item-body>
                </nb-accordion-item>
            </nb-accordion>
        </div>
    </nb-card-body>
</nb-card>